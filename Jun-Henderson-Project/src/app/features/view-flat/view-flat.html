<ng-container *ngIf="flat() as f; else notFound">

  <div class="vf-hero" *ngIf="f.image; else heroBg">
    <img [src]="f.image" alt="Flat image" style="width:100%;height:auto;display:block;border-radius:12px;">
  </div>
  <ng-template #heroBg>
    <div class="vf-hero" [style.background-image]="'url(' + imageOf(f) + ')'"></div>
  </ng-template>

  <section class="vf-body">
    <header class="vf-head">
      <h1 class="vf-title">{{ f.streetName }} {{ f.streetNumber }}, {{ f.city }}</h1>
      <div class="vf-price">\${{ f.rentPrice }} / month</div>
    </header>

    <div class="vf-meta">
      <span class="chip">Area: {{ f.areaSize }} mÂ²</span>
      <span class="chip" *ngIf="f.hasAC">AC</span>
      <span class="chip">Built: {{ f.yearBuilt }}</span>
      <span class="chip">Available: {{ f.dateAvailable }}</span>
    </div>

    <div class="vf-actions">
      <a class="btn ghost" routerLink="/home">Back</a>
      <button class="btn primary" *ngIf="isOwner(f)" (click)="goEdit(f.id)">Edit</button>
    </div>
  </section>
</ng-container>

<ng-template #notFound>
  <div class="vf-empty">
    <p>Flat not found.</p>
    <a class="btn primary" routerLink="/home">Go Home</a>
  </div>
</ng-template>

<app-flat-messages *ngIf="flat() as f" [flatId]="f.id!" [ownerId]="f.ownerId!"></app-flat-messages>
